{
    "$schema": "http://json-schema.org/draft-06/schema#",
    

    "properties": {
        "TextModule": {
            "$ref": "#/definitions/TextModule"
        },
        "Data": {
            
            "properties": {
                "__type": {
                    "type": "string",
                    "description": "对应的类型，在根部固定为 MOD.InterludeData,Assembly-CSharp",
                    "default": "MOD.InterludeData,Assembly-CSharp"
                }},
            "anyOf": [
                {
                    "if": {
                        "properties": { "__type": { "const": "MOD.InterludeData,Assembly-CSharp" } }
                    },
                    "then": {
                        "$ref": "#/definitions/TextModule"
                    }
                }]
        }
    },
    "additionalProperties": true,
    "definitions": {
        "TextModule": {
            "type": "object",
            "properties": {
                "__type": {
                    "type": "string",
                    "description": "对应的类型，在根部固定为 MOD.InterludeData,Assembly-CSharp",
                    "default": "MOD.InterludeData,Assembly-CSharp"
                },
                "value": {
                    "type": "object",
                    "properties": {
                        "ModuleKey": {
                            "type": "string",
                            "description": "幕间的代号"
                        },
                        "Localization_ModuleName": {
                            "$ref": "#/definitions/Localization",
                            "description": "幕间模组的名称"
                        },
                        "IsLock": {
                            "type": "boolean",
                            "description": "幕间是否可被游玩."
                        },
                        "StartInterludeInfo": {
                            "$ref": "#/definitions/Localization",
                            "description": "幕间的介绍文本"
                        },
                        "BGM": {
                            "type": "object",
                            "properties": {
                                "AudioRes": {
                                    "anyOf": [{
                                        "type": "string"
                                    },
                                    {
                                        "type": "null"
                                    }],
                                    "description": "对应的模组BGM"
                                },
                                "Volume": {
                                    "type": "number",
                                    "description": "音量大小"
                                },
                                "FadeTime": {
                                    "type": "number",
                                    "description": "渐入渐出时间（秒）"
                                }
                            },
                            "required": [
                                "AudioRes",
                                "Volume",
                                "FadeTime"
                            ]
                        },
                        "NoProfNameList": {
                            "type": "array",
                            "description": "可进行这个幕间的职业列表",
                            "items": {
                                "type": "string",
                                "examples": [
                                    "学者",
                                    "警察",
                                    "打手",
                                    "侦探",
                                    "医生",
                                    "旅者"
                                ]
                            }
                        },
                        "LockCheckList": {
                            "type": "array",
                            "description": "解锁检查条件列表（目前版本暂时没有条件）"
                        },
                        "Config": {
                            "type": "object",
                            "properties": {
                                "All": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/definitions/Interclude"
                                    }
                                }
                            },
                            "required": [
                                "All"
                            ]
                        },
                        "InterludeCoverPath": {
                            "type": "string",
                            "description": "这个幕间的封面的路径"
                        }
                    },
                    "required": [
                        "ModuleKey",
                        "Localization_ModuleName",
                        "IsLock",
                        "StartInterludeInfo",
                        "BGM",
                        "NoProfNameList",
                        "LockCheckList",
                        "Config",
                        "InterludeCoverPath"
                    ]
                }
            },
            "required": [
                "__type",
                "value"
            ]
        },
        "Interclude": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "ChooseKey": {
                    "type": "string",
                    "description": "这个章节的代号，在跳转指令中可以通过这个代号来指定跳转到的章节。"
                },
                "Segments": {
                    "type": "array",
                    "description": "这个章节中包含的部分，会从前到后顺序执行",
                    "items": {
                        "$ref": "#/definitions/Segment"
                    }
                },
                "InterludeOptions": {
                    "type": "array",
                    "description": "完成 Segments 内的操作后，会显示出这里标识的若干个选项，由玩家进行选择。",
                    "items": {
                        "$ref": "#/definitions/InterludeOption"
                    }
                }
            },
            "required": [
                "ChooseKey",
                "InterludeOptions",
                "Segments"
            ],
            "title": "Interclude"
        },
        "InterludeOption": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "Localization_BtnDes": {
                    "$ref": "#/definitions/Localization",
                    "description": "按钮上的描述"
                },
                "Localization_BtnTip": {
                    "$ref": "#/definitions/Localization",
                    "description": "按钮的悬浮说明"
                },
                "Trait_Locks": {
                    "type": "array",
                    "description": "暂时用处不明",
                    "items": {}
                },
                "Trait_Awards": {
                    "type": "array",
                    "description": "暂时用处不明",
                    "items": {}
                },
                "Checks": {
                    "type": "array",
                    "description": "用于表示这个选项可被选择的条件，仅当内部的所有条件满足时，可被选择",
                    "items": {}
                },
                "Opts": {
                    "type": "array",
                    "description": "点选后会执行的相关行为",
                    "items": {
                        "$ref": "#/definitions/InterludeEvent"
                    }
                },
                "IsCompleteBtn": {
                    "type": "boolean",
                    "description": "标识这是否是“幕间完成”按钮，如果是则文本内容/逻辑会被替换。"
                }
            },
            "required": [
                "Checks",
                "IsCompleteBtn",
                "Localization_BtnDes",
                "Localization_BtnTip",
                "Opts",
                "Trait_Awards",
                "Trait_Locks"
            ],
            "title": "InterludeOption"
        },
        "Localization": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "TarKey": {
                    "anyOf": [
                        {
                            "type": "null"
                        },
                        {
                            "type": "string"
                        }
                    ],
                    "description": "对应本地化文本的编号"
                },
                "InputText": {
                    "anyOf": [
                        {
                            "type": "null"
                        },
                        {
                            "type": "string"
                        }
                    ],
                    "description": "这句话对应的文本（会用于本地化语音的关联）"
                },
                "UseCustomParam": {
                    "type": "boolean",
                    "description": "文本中是否使用了部分自定义替代参数（如技能名，请使用 CustomParam 以保证正确的本地化行为）"
                },
                "CustomParams": {
                    "type": "array",
                    "items": {},
                    "description": "对自定义替代参数的定义"
                }
            },
            "required": [
                "CustomParams",
                "InputText",
                "TarKey",
                "UseCustomParam"
            ],
            "title": "Localization",
            "default": {
                "CustomParams": [],
                "InputText": "寻找屋主人",
                "TarKey": "55215827eaf3f2ffd0ab57d8bbb836d8",
                "UseCustomParam" : false
            },
            "defaultSnippets":{
                "label": "自动补全",
                "description": "生成一个默认的本地化文本段落",
                "body": {
                    "CustomParams": [],
                    "InputText": "$1",
                    "TarKey": "55215827eaf3f2ffd0ab57d8bbb836d8",
                    "UseCustomParam" : false
                }
            }
        },
        "InterludeEvent": {
            "type": "object",
            "additionalProperties": true,
            "properties": {
                "__type": {
                    "type": "string",
                    "description": "对应的具体类型，不同的类型包含不同的参数，以及不同的功能",
                    "examples": [
                        "InterludeEvent.JumpToTarChooseOption,Assembly-CSharp",
                        "InterludeEvent.SetInterludeTxtBg,Assembly-CSharp",
                        "InterludeEvent.ShowCenterDialogOption,Assembly-CSharp"
                    ]
                },
                "_baseKey": {
                    "anyOf": [
                        {
                            "type": "null"
                        },
                        {
                            "type": "string"
                        }
                    ],
                    "description": "内部用于标记同一个对象的标记，一般而言同一个文本可以设为相同值。"
                }
            },
            "anyOf": [
                {
                    "if": {
                        "properties": { "__type": { "const": "InterludeEvent.JumpToTarChooseOption,Assembly-CSharp" } }
                    },
                    "then": {
                        "properties": {
                            "TarKey": {
                                "type": "string",
                                "description": "转到指定的一个章节（ChooseKey名）"
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": { "__type": { "const": "InterludeEvent.SetInterludeTxtBg,Assembly-CSharp" } }
                    },
                    "then":
                    {
                        "properties": {
                            "SetMode": {
                                "type": "integer",
                                "default": 0,
                                "description": "设置为显示或是消失",
                                "title": "The SetMode Schema",
                                "examples": [
                                    1, 0
                                ]
                            },
                            "SpritePath": {
                                "type": "string",
                                "default": "",
                                "description": "设置背景图片的路径",
                                "title": "The SpritePath Schema",
                                "examples": [
                                    "UI/Textures/Icon/Interlude/YYSW/yysw_liushengji"
                                ]
                            }
                        }
                    }
                },
                {
                    "if": {
                        "properties": { "__type": { "const": "InterludeEvent.ShowCenterDialogOption,Assembly-CSharp" } }
                    },
                    "then": {
                        "properties": {
                            "Localization_Dialog": {
                                "type": "object",
                                "description": "显示讲述文本",
                                "additionalProperties": true,
                                "$ref": "#/definitions/Segment"
                            }
                        }
                    }
                }
            ],
            "title": "InterludeEvent",
            "defaultSnippets":[
                {
                    "label": "选择枝跳转",
                    "description": "这是一个跳转选择枝的例子",
                    "body": {
                        "__type" : "InterludeEvent.JumpToTarChooseOption,Assembly-CSharp",
                        "TarKey" : "$1",
                        "_baseKey" : "$2"
                    }
                },
                {
                    "label": "背景图片设置",
                    "description": "这是一个设置幕间背景图片的例子",
                    "body": {
                        "__type": "InterludeEvent.SetInterludeTxtBg,Assembly-CSharp",
                        "SetMode": 1,
                        "SpritePath": "UI\/Textures\/Icon\/Interlude\/YYSW\/yysw_liushengji",
                        "_baseKey": "$1"
                    }
                },
                {
                    "label": "文本输出",
                    "description": "一般用于检定结束的文本显示",
                    "body": {
                        "__type": "InterludeEvent.ShowCenterDialogOption,Assembly-CSharp",
                        "Localization_Dialog": {
                            "Sound": null,
                            "NarratorData": {
                                "OverrideSpeaker": null,
                                "Localization_Des": {
                                    "TarKey": "a1da95f948f2d615dfbfd0c4678d021e",
                                    "InputText": "留声机中飘出的音乐声隐约让你感到了一丝不协调，就像是刻录的时候出了什么问题。",
                                    "UseCustomParam": false,
                                    "CustomParams": [
                    
                                    ]
                                }
                            },
                            "RoleDialog": null,
                            "SpritePath": null,
                            "Complete_Opt": [
                            ]
                        },
                        "_baseKey": null
                    }
                }
            ],
            "required": [
                "__type",
                "_baseKey"
            ]
        },
        "Segment": {
            "type": "object",
            "additionalProperties": false,
            "properties":{
                "Sound": {
                    "anyOf": [{
                        "type": "string"
                    },
                    {
                        "type": "null"
                    }],
                    "default": null,
                    "description": "声音-暂时用途不明。",
                    "title": "The Sound Schema",
                    "examples": [
                        null
                    ]
                },
                "NarratorData": {
                    "$ref": "#/definitions/NarratorData"
                },
                "RoleDialog": {
                    "description": "另一种显示讲述文本的方式",
                    "title": "The RoleDialog Schema",
                    "anyOf": [{
                        "type": "object",
                        "properties": {
                            "OverrideSpeaker": {
                                "anyOf": [{
                                    "type": "string"
                                },
                                {
                                    "type": "null"
                                }],
                                "description": "对使用的讲述人进行覆写，如果不进行覆写默认为 守秘人。",
                                "default": null,
                                "title": "The OverrideSpeaker Schema",
                                "examples": [
                                    null
                                ]
                            },
                            "Name": {
                                "description": "名称？",
                                "$ref": "#/definitions/Localization"
                            },
                            "Dialogs":{
                                "type": "array",
                                "default": [],
                                "items": {
                                    "$ref": "#/definitions/Localization"
                                }
                            }
                        }
                    },
                    {
                        "type": "null"
                    }],
                    "examples": [
                        null
                    ],
                    "defaultSnippets": {
                        "OverrideSpeaker" : null,
                        "Localization_Des" : {
                            "TarKey" : "c34fbde0e352849dbd700a8e27f28e8d",
                            "InputText" : "你收回视线，开始重新打量起这个房间。\r\n装修布设意外的高雅，摆件家具看上去也相当昂贵。\r\n这种屋子就算是在城里也只有富人才住的起，怎么看都不像是会出现在森林里的样子。",
                            "UseCustomParam" : false,
                            "CustomParams" : [
                                
                            ]
                        }
                    }
                },
                "SpritePath": {
                    "anyOf": [{
                        "type": "string"
                    },
                    {
                        "type": "null"
                    }],
                    "default": null,
                    "title": "The SpritePath Schema",
                    "examples": [
                        null
                    ]
                },
                "Complete_Opt": {
                    "type": "array",
                    "default": [],
                    "title": "The Complete_Opt Schema",
                    "items": {
                        "$ref": "#/definitions/InterludeEvent"
                    },
                    "examples": [
                        []
                    ]
                }
            },
            "required": [
                "Complete_Opt",
                "NarratorData",
                "RoleDialog",
                "Sound",
                "SpritePath"
            ],
            "title": "Segment",
            "defaultSnippets": {
                "Sound" : null,
                "NarratorData" : {
                    "OverrideSpeaker" : null,
                    "Localization_Des" : {
                        "TarKey" : "c34fbde0e352849dbd700a8e27f28e8d",
                        "InputText" : "你收回视线，开始重新打量起这个房间。\r\n装修布设意外的高雅，摆件家具看上去也相当昂贵。\r\n这种屋子就算是在城里也只有富人才住的起，怎么看都不像是会出现在森林里的样子。",
                        "UseCustomParam" : false,
                        "CustomParams" : [
                            
                        ]
                    }
                },
                "RoleDialog" : null,
                "SpritePath" : null,
                "Complete_Opt" : [
                    
                ]
            }
        },
        "NarratorData": {
                    "type": "object",
                    "description": "讲述信息相关的内容",
                    "title": "The NarratorData Schema",
                    "required": [
                        "OverrideSpeaker",
                        "Localization_Des"
                    ],
                    "properties": {
                        "OverrideSpeaker": {
                            "anyOf": [{
                                "type": "string"
                            },
                            {
                                "type": "null"
                            }],
                            "description": "对使用的讲述人进行覆写，如果不进行覆写默认为 守秘人。",
                            "default": null,
                            "title": "The OverrideSpeaker Schema",
                            "examples": [
                                null
                            ]
                        },
                        "Localization_Des": {
                            "description": "将要讲述的文本内容",
                            "$ref": "#/definitions/Localization"
                        }
                    },
                    "examples": [{
                        "OverrideSpeaker": null,
                        "Localization_Des": {
                            "TarKey": "a1da95f948f2d615dfbfd0c4678d021e",
                            "InputText": "留声机中飘出的音乐声隐约让你感到了一丝不协调，就像是刻录的时候出了什么问题。",
                            "UseCustomParam": false,
                            "CustomParams": []
                        }
                    }],
                    "defaultSnippets":{
                        "OverrideSpeaker": null,
                        "Localization_Des": {
                            "TarKey": "a1da95f948f2d615dfbfd0c4678d021e",
                            "InputText": "留声机中飘出的音乐声隐约让你感到了一丝不协调，就像是刻录的时候出了什么问题。",
                            "UseCustomParam": false,
                            "CustomParams": []
                        }
                    }
        }
    }
}
